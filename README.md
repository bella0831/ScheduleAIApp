# 个人日程生成系统

一个基于Transformer模型的智能个人日程生成系统，能够自动解析用户需求并生成无冲突的日程安排。

## 系统特性

### 🧠 智能任务解析
- 使用T5-base模型进行意图识别
- 自动提取任务类型、时长、偏好时间段和优先级
- 支持自然语言输入

### ⚙️ 规则引擎调度
- 智能时间冲突检测和解决
- 保证8小时睡眠时间
- 单日任务数量限制（≤8个）
- 高优先级任务优先安排
- 固定任务自动插入（睡眠、用餐等）

### 📊 完整约束处理
- 任务时间不重叠
- 时间段偏好匹配
- 优先级排序
- 日程验证和错误检测

## 系统架构

```
个人日程生成系统
├── 模型层 (T5-base)
│   ├── 意图识别
│   ├── 任务时长估算
│   └── 偏好时间段预测
├── 规则引擎层
│   ├── 时间冲突检测
│   ├── 任务调度算法
│   └── 约束验证
└── 应用层
    ├── 交互界面
    ├── 日程可视化
    └── 结果输出
```

## 安装和运行

### 1. 环境要求
- Python 3.8+
- PyTorch 1.9+
- Transformers 4.21+

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 生成训练数据
```bash
python data_generator.py
```

### 4. 训练模型（可选）
```bash
python trainer.py
```

### 5. 运行系统
```bash
python main.py
```

## 使用示例

### 输入格式
```
上下文：周三 在家 ｜ 需求：写周报2小时，健身1小时，下午开会
```

### 输出示例
```
============================================================
个人日程表
============================================================
时间           任务             时长      优先级
------------------------------------------------------------
07:00-08:00   早餐             60分钟    固定
09:00-11:00   写周报           120分钟   P1
12:00-13:00   午餐             60分钟    固定
14:00-15:30   开会             90分钟    P1
18:00-19:00   晚餐             60分钟    固定
19:30-20:30   健身             60分钟    P2
22:00-06:00   睡眠             480分钟   固定

摘要:
  - 已安排任务: 7 个
  - 未安排任务: 0 个
  - 总时长: 270 分钟
```

## 配置说明

### 时间段定义
- 早晨: 06:00-12:00
- 上午: 09:00-12:00
- 下午: 12:00-18:00
- 傍晚: 18:00-21:00
- 晚上: 21:00-22:00

### 优先级等级
- P1: 紧急重要
- P2: 重要
- P3: 一般
- P4: 低优先级

### 固定任务
- 睡眠: 22:00-06:00 (8小时)
- 早餐: 07:00-08:00
- 午餐: 12:00-13:00
- 晚餐: 18:00-19:00

## 文件结构

```
personal-schedule-generator/
├── config.py              # 配置文件
├── data_generator.py      # 数据生成器
├── model.py              # T5模型定义
├── scheduler.py          # 规则引擎
├── trainer.py            # 模型训练器
├── main.py              # 主程序
├── requirements.txt      # 依赖包
├── README.md            # 说明文档
├── data/                # 数据目录
│   ├── train_data.json  # 训练数据
│   └── val_data.json    # 验证数据
└── models/              # 模型目录
    ├── best_model/      # 最佳模型
    └── final_model/     # 最终模型
```

## 技术细节

### 模型架构
- 基础模型: T5-base (220M参数)
- 输入格式: 自然语言描述
- 输出格式: 结构化任务列表
- 特殊Token: 用于任务、时长、时间、优先级标记

### 调度算法
1. 按优先级排序任务
2. 获取可用时间段（排除固定任务）
3. 为每个任务寻找最佳时间段
4. 更新可用时间段
5. 验证日程有效性

### 约束处理
- 时间冲突检测: O(n²) 复杂度
- 时间段分割: 处理重叠情况
- 优先级调度: 确保重要任务优先安排
- 容量限制: 单日任务数量控制

## 扩展功能

### 可扩展的配置
- 自定义时间段定义
- 灵活的优先级系统
- 可调整的约束参数
- 个性化固定任务

### 未来改进
- 多日日程规划
- 学习用户偏好
- 集成日历系统
- 移动端应用

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 许可证

MIT License
