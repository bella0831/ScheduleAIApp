# 使用指南

## 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行系统
```bash
# 快速演示
python run.py

# 或者直接运行主程序
python main.py
```

## 输入格式

系统接受自然语言输入，格式为：
```
上下文：[星期] [地点] ｜ 需求：[任务描述]
```

### 示例输入
```

```

## 输出说明

### 日程表格式
```
============================================================
个人日程表
============================================================
时间           任务             时长      优先级
------------------------------------------------------------
07:00-08:00   早餐             60分钟    固定
09:00-11:00   写周报           120分钟   P1
12:00-13:00   午餐             60分钟    固定
14:00-15:30   开会             90分钟    P1
18:00-19:00   晚餐             60分钟    固定
19:30-20:30   健身             60分钟    P2
22:00-06:00   睡眠             480分钟   固定
```

### 优先级说明
- **P1**: 紧急重要任务
- **P2**: 重要任务  
- **P3**: 一般任务
- **P4**: 低优先级任务
- **固定**: 系统自动安排的固定任务

## 系统功能

### 智能解析
- 自动识别任务类型
- 估算任务时长
- 预测偏好时间段
- 分配优先级

### 智能调度
- 避免时间冲突
- 优先安排重要任务
- 考虑时间段偏好
- 自动插入固定任务

### 约束处理
- 保证8小时睡眠
- 限制单日任务数量
- 处理时间重叠
- 验证日程有效性

## 高级功能

### 训练自定义模型
```bash
# 生成训练数据
python data_generator.py

# 训练模型
python trainer.py
```

### 测试系统功能
```bash
# 运行完整测试
python test_system.py
```

## 配置选项

### 修改时间段定义
编辑 `config.py` 中的 `TIME_SLOTS`：
```python
TIME_SLOTS = {
    "早晨": ("06:00", "12:00"),
    "上午": ("09:00", "12:00"),
    "下午": ("12:00", "18:00"),
    "傍晚": ("18:00", "21:00"),
    "晚上": ("21:00", "22:00")
}
```

### 修改固定任务
编辑 `config.py` 中的 `FIXED_TASKS`：
```python
FIXED_TASKS = {
    "睡眠": {"start": "22:00", "end": "06:00", "duration": 480},
    "早餐": {"start": "07:00", "end": "08:00", "duration": 60},
    "午餐": {"start": "12:00", "end": "13:00", "duration": 60},
    "晚餐": {"start": "18:00", "end": "19:00", "duration": 60}
}
```

### 调整约束参数
```python
SLEEP_START = "22:00"      # 睡眠开始时间
SLEEP_END = "06:00"        # 睡眠结束时间
MAX_TASKS_PER_DAY = 8      # 每日最大任务数
```

## 故障排除

### 常见问题

1. **模型加载失败**
   - 检查网络连接
   - 确保有足够的磁盘空间
   - 尝试重新安装依赖

2. **内存不足**
   - 减少批次大小 (`BATCH_SIZE`)
   - 使用CPU模式
   - 关闭其他程序

3. **解析错误**
   - 检查输入格式
   - 确保任务描述清晰
   - 尝试简化输入

### 调试模式
```python
# 在代码中添加调试信息
import logging
logging.basicConfig(level=logging.DEBUG)
```

## 扩展开发

### 添加新任务类型
1. 在 `data_generator.py` 中添加任务模板
2. 更新训练数据生成逻辑
3. 重新训练模型

### 自定义调度规则
1. 修改 `scheduler.py` 中的调度算法
2. 添加新的约束条件
3. 更新验证逻辑

### 集成外部系统
1. 添加API接口
2. 连接日历系统
3. 实现数据同步

## 性能优化

### 模型优化
- 使用更小的模型（如T5-small）
- 量化模型参数
- 使用模型蒸馏

### 调度优化
- 实现并行调度
- 使用启发式算法
- 缓存计算结果

## 支持

如有问题，请：
1. 查看本文档
2. 运行测试脚本
3. 检查错误日志
4. 提交Issue
